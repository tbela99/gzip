var critical=function(e){"use strict";function t(e,a){let s=e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;if(s)try{return s.call(e,a)}catch(e){return!1}else{let s=e.ownerDocument.querySelectorAll(a),i=s.length;for(;i&&i--;)if(s[i]===e)return!0}return!1}function r(e,a){if("data:"===e.substr(0,5))return e;const s=new URL(a,window.location),i=new URL(e,s);return s.protocol!=i.protocol||s.host!=i.host||i.host!=window.location.host||s.port!=i.port||i.port!=window.location.port||s.port!=i.port||i.protocol!=window.location.protocol?i.toString():i.pathname}async function n(e={}){e=Object.assign({fonts:!0},e);const a=new Set,s=["all","print",""],i=[],c=window.innerHeight,f=document.createTreeWalker(document,NodeFilter.SHOW_ELEMENT,(function(e){return NodeFilter.FILTER_ACCEPT}),!0),u=new Set,p=new Set,h=new Map;if([].push.apply(i,Array.from(document.styleSheets).filter(e=>""==e.media.mediaText||"print"!=e.media.mediaText&&window.matchMedia(e.media.mediaText).matches).map(e=>{try{return Array.from(e.cssRules||e.rules).map(e=>({rule:e,match:!1}))}catch(a){console.error(JSON.stringify({message:a.message,stylesheet:e.href},null,1))}return!1}).filter(e=>e).flat()),0===i.length)return[];let y,d,m=i.length;for(;f.nextNode();){let s=f.currentNode;if(s.nodeType==Node.ELEMENT_NODE&&s.getBoundingClientRect().top<c&&!["SCRIPT","LINK","HEAD","META","TITLE"].includes(s.tagName))for(let c=0;c<m;c++)if(!i[c].match)if(i[c].rule instanceof CSSStyleRule)t(s,i[c].rule.selectorText)&&(i[c].match=!0,i[c].rule.style.getPropertyValue("font-family")&&i[c].rule.style.getPropertyValue("font-family").split(/\s*,\s*/).forEach(e=>"inherit"!=e&&p.add(e.replace(/(['"])([^\1\s]+)\1/,"$2"))));else if(i[c].rule instanceof CSSMediaRule){let e=Array.from(i[c].rule.cssRules||i[c].rule.rules).map(e=>({rule:e,match:!1}));e.unshift(c+1,0),i.splice.apply(i,e),m=i.length}else if(i[c].rule instanceof CSSImportRule)try{if(!window.matchMedia(i[c].rule.media.mediaText).matches)continue;let e=Array.from(i[c].rule.styleSheet.cssRules||i[c].rule.styleSheet.rules).map(e=>({rule:e,match:!1}));e.unshift(c+1,0),i.splice.apply(i,e),m=i.length,a.add("/* @import: "+i[c].rule.href+" from "+(i[c].rule.parentStyleSheet.href||"inline #"+g)+" */")}catch(e){console.error(e.message),console.error(i[c].rule.href)}else i[c].rule instanceof CSSFontFaceRule&&i[c].rule.style.getPropertyValue("font-family")&&i[c].rule.style.getPropertyValue("src")&&u.add(i[c].rule)}let S="",g=-1;e:for(let c=0;c<m;c++){if(!i[c].match)continue;y=i[c].rule;let f=!1;if(h.has(y.parentStyleSheet)?S&&S!=h.get(y.parentStyleSheet).file&&(f=!0):(h.set(y.parentStyleSheet,{base:(y.parentStyleSheet.href&&y.parentStyleSheet.href.replace(/[?#].*/,"")||location.pathname).replace(/([^/]+)$/,""),file:y.parentStyleSheet.href||"inline #"+ ++g}),f=!0),f)try{h.get(y.parentStyleSheet).file,a.add("/* file: "+h.get(y.parentStyleSheet).file+" */")}catch(e){console.error(e.message),console.error(y.parentStyleSheet)}for(S=h.get(y.parentStyleSheet).file,d=y.cssText,"inline"!=S&&(d=d.replace(/url\(([^)%\s]*?)\)/g,(function(e,a){return"url("+r(a=(a=a.trim()).replace(/^(['"])([^\1\s]+)\1/,"$2"),h.get(y.parentStyleSheet).base)+")"})));y.parentRule;){if(y=y.parentRule,"print"==y.conditionText)continue e;if(s.includes(y.conditionText)||(d="@media "+y.conditionText+" {"+d+"}"),!y.parentRule)break}if(y.parentStyleSheet){let e=y.parentStyleSheet.media.mediaText;if("print"==e)continue e;s.includes(e)||(d="@media "+e+" {"+d+"}")}a.has(d)&&a.delete(d),a.add(d)}const w=new Map;if(e.fonts){let e,a,s,i,c;for(i of u)if(i.style.getPropertyValue("font-family").split(/\s*,\s*/).some(e=>p.has(e.replace(/(['"])([^\1\s]+)\1/,"$2")))){for(c={fontFamily:i.style.getPropertyValue("font-family").replace(/(['"])([^\1\s]+)\1/,"$2"),src:i.style.getPropertyValue("src").replace(/(^|[,\s*])local\([^)]+\)\s*,?\s*?/g,"").replace(/url\(([^)%\s]+)\)([^,]*)(,?)\s*/g,(e,a,s,c)=>(a=a.replace(/(['"])([^\1\s]+)\1/,"$2"),h.has(i.parentStyleSheet)||h.set(i.parentStyleSheet,{base:i.parentStyleSheet.href.replace(/([^/]+)$/,""),file:i.parentStyleSheet.href}),"url("+r(a,h.get(i.parentStyleSheet).base)+")"+c)).trim(),properties:{}},e=i.style.length;e--;)a=i.style.item(e),s=i.style.getPropertyValue(a),"font-family"!=a&&"src"!=a&&""!==s&&void 0!==s&&(c.properties[a.replace(/([A-Z])/g,(e,a)=>"-"+a.toLowerCase())]=s);w.set(JSON.stringify(c),c)}}return{styles:[...a],fonts:[...w.values()]}}async function l(e,a,s="application/octet-stream; charset=utf-8"){const i=URL.createObjectURL(new Blob(e,{type:s})),c=document.createElement("a");return document.body.append(c),c.style.display="none",c.download=a,c.href=i,c.dispatchEvent(new MouseEvent("click")),URL.revokeObjectURL(i),e}function o(e){return"/* font preloader script: "+e.length+' */\n"fonts" in document && '+JSON.stringify([...e],null,1)+".forEach(font => new FontFace(font.fontFamily, font.src, font.properties).load().then(font => document.fonts.add(font)))"}return e.download=async function(e="critical.css",a={}){return n(a).then(async a=>(await l(a.styles,e,"text/css; charset=utf-8").then(async()=>{a.fonts.length>0&&await l([o(a.fonts)],e.replace(/\.css$/,".js"),"text/javascript; charset=utf-8")}),a))},e.extract=n,e.fontscript=o,Object.defineProperty(e,"__esModule",{value:!0}),e}({});